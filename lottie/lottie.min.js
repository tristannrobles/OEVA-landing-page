// Espera a que el DOM esté completamente cargado antes de ejecutar el script
document.addEventListener('DOMContentLoaded', function() {

    // Verifica si la librería lottie está disponible
    if (typeof lottie === 'undefined') {
        console.error('Lottie library not loaded.');
        const logoContainer = document.getElementById('lottie-logo');
        if (logoContainer) {
            logoContainer.textContent = 'OEVA Spa'; // Texto alternativo
            logoContainer.style.color = 'white';
            logoContainer.style.fontSize = '1.5rem';
            logoContainer.style.fontWeight = 'bold';
        }
        return;
    }

    // Elemento contenedor para la animación Lottie
    const logoContainer = document.getElementById('lottie-logo');

    // Asegúrate de que el contenedor exista
    if (logoContainer) {
        // Configura y carga la animación Lottie
        const animation = lottie.loadAnimation({
            container: logoContainer,
            renderer: 'svg',
            loop: false, 
            autoplay: true,
            path: 'lottie/oeva_prueba.json'
        });

        // Event listener que se activa cuando la animación completa un ciclo (efecto ping-pong)
        animation.addEventListener('complete', function() {
            animation.setDirection(animation.playDirection * -1);
            animation.play();
        });

        // Manejo de errores opcional
        animation.addEventListener('data_failed', function() {
            console.error('Failed to load Lottie animation data from path: lottie/oeva_prueba.json');
             if (logoContainer) {
                logoContainer.textContent = 'OEVA Spa';
                logoContainer.style.color = 'white';
                logoContainer.style.fontSize = '1.5rem';
                logoContainer.style.fontWeight = 'bold';
            }
        });
         animation.addEventListener('error', function(error) {
            console.error('Lottie animation error:', error);
        });

    } else {
        console.error('Logo container element (#lottie-logo) not found.');
    }

    // --- INICIA CÓDIGO DEL CARRUSEL BOUTIQUE ---
    const splideContainer = document.querySelector('.splide');
    
    // Verificamos que el contenedor del carrusel exista en la página actual
    if (splideContainer) {
        new Splide(splideContainer, {
            type      : 'loop',
            drag      : 'free',
            focus     : 'center',
            gap       : '1rem', // Espacio entre las imágenes
            perPage   : 4,      // Slides a mostrar en escritorio
            autoScroll: {
              speed: 1,           // Velocidad del desplazamiento
              pauseOnHover: true, // Pausa al pasar el mouse
              pauseOnFocus: true, // Pausa al seleccionar
            },
            arrows: false, // Ocultamos las flechas de navegación
            pagination: false, // Ocultamos los puntos de paginación
            breakpoints: {
                1024: { // Para tabletas
                    perPage: 3,
                },
                768: { // Para móviles grandes
                    perPage: 2,
                },
                640: { // Para móviles pequeños
                    perPage: 1,
                },
            },
        }).mount(window.splide.Extensions);
    }
    // --- FIN CÓDIGO DEL CARRUSEL BOUTIQUE ---

}); // Fin del addEventListener